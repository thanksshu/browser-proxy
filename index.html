<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Proxy</title>
</head>

<body>
    <script>
        const registerBrowserProxy = async () => {
            try {
                const registration = await navigator.serviceWorker.register("/sw.js");
                await navigator.serviceWorker.ready;
                window.addEventListener('beforeunload', async () => {
                    await registration.unregister();
                });
            } catch (error) {
                console.error(`[browser proxy] Service Worker registration failed with ${error}`);
            }
        };

        if ("serviceWorker" in navigator) {
            registerBrowserProxy();
        } else {
            console.error("[browser proxy] Service Worker not supported");
        }
    </script>
</body>

</html>